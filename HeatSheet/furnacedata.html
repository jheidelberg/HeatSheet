<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>tapdataent</title>
		<meta name="description" content="">
		<meta name="author" content="john.heidelberg">

		<meta name="viewport" content="width=device-width; initial-scale=1.0">

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico">
		<link rel="apple-touch-icon" href="/apple-touch-icon.png">
		<link rel="stylesheet" type="text/css" href="/css/stylesheet.css">
               <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/sc' + 'ript>');</script>
        <!--script src="js/vendor/jquery.validation.js"></script-->
        <script type="text/javascript">
            var rslts;
            function DisableForm(myForm, cond, reset)
            {
                var Frm = document.getElementById(myForm);

                var node_list = Frm.getElementsByTagName('input');
                for (var i = 0; i < node_list.length; i++)
                {
                    var node = node_list[i];
                    if (node.getAttribute('type') == 'checkbox' || node.getAttribute('type') == 'submit')
                    {
                        node.disabled = cond;
                    }
                    else { node.readOnly = cond; }
                    if (reset & node.getAttribute('type') != 'submit' & node.id != 'prtbtn' & node.name != 'table') { node.innerHTML = ''; node.value = ''; };

                }

                var node_list = Frm.getElementsByTagName('textarea');
                for (var i = 0; i < node_list.length; i++)
                {
                    if (reset) { node_list[i].innerHTML = ''; node_list[i].value = ''; };
                    node_list[i].disabled = cond;
                }
                
               

            };
            function newObj()
            {
                document.getElementById("rowid").value = 0;
                DisableForm("Input", false, true);

            }
            function editObj()
            {
                if (document.getElementById("rowid").value) { DisableForm('Input', false, false); } else { newObj(); };
            }
            function openlist()
            {
                DisableForm("Input", true, false);
                document.getElementById("grayarea").removeAttribute("class", "hidemeall");
                document.getElementById("ObjList").removeAttribute("class", "hidemeall");
                document.getElementById("grayarea").setAttribute("class", "HideAll");
                getList(false);

            }
            function loaditem(getnumber)
            {
                hidegrayarea();
                $.ajax({
                    type: "POST",
                    url: "/Report/FormHandler",
                    data: { "getnumber": getnumber, "table": document.getElementById("table").value },
                    dataType: "json",

                    success: function (msg)
                    {

                        $("#formResponse").removeClass('error');
                        $("#formResponse").removeClass('success');
                        $("#formResponse").addClass(msg[0].status);
                        $("#formResponse").html(msg[0].message);

                        var d = new Date;
                        var itm;
                        rslts = msg;

                        var id = 0;

                        for (var x in rslts[id])
                        {
                            itm = document.getElementById(x);
                            if (rslts[id][x] == null) { rslts[id][x] = ''; };
                            if (rslts[id][x] == 'null') { rslts[id][x] = ''; };
                            if (rslts[id][x] == '') { rslts[id][x] = ''; };
                            if (itm) { itm.innerHTML = rslts[id][x]; itm.value = rslts[id][x]; itm.enabled=false;};

                        };
                    },
                    error: function ()
                    {
                        $("#formResponse").removeClass('success');
                        $("#formResponse").addClass('error');
                        $("#formResponse").html("There was an error submitting the form. Please try again.");
                    }
                });


                return false;

            }
            function hidegrayarea()
            {
                document.getElementById("grayarea").removeAttribute("class", "HideAll");
                document.getElementById("ObjList").setAttribute("class", "hidemeall");
                document.getElementById("grayarea").setAttribute("class", "hideme");
            }

            function getList(srch)
            {
                var dta = { "table": "GenSearch", "offset": "0", "Seltable": document.getElementById("table").value };
                if (srch == true)
                {
					dta = {
                        "table": "GenSearch"
                        , "Seltable": document.getElementById("table").value
                        , "Opt1": document.getElementById("Opt1").name
                        , "Opt2": document.getElementById("Opt2").name
                        //, "Opt3": document.getElementById("Opt3").name
                        , "Par1": document.getElementById("Opt1").value
                        , "Par2": document.getElementById("Opt2").value
                        //, "Par3": document.getElementById("Opt3").value
                    };
                };
                $.ajax({
                    type: "POST",
                    url: "/Report/FormHandler",
                    data: dta,
                    dataType: "json",

                    success: function (msg)
                    {
                        document.getElementById("lst").innerHTML = "";
                        $("#formResponse").removeClass('error');
                        $("#formResponse").removeClass('success');
                        $("#formResponse").addClass(msg[0].status);
                        $("#formResponse").html(msg[0].message);

                        var d = new Date;
                        rslts = msg;
                        var Struct = "";
                        for (var i = 0; i < msg.length; i++)
                        {
                            Struct += "<div class='lstcls' onclick='loadProd(" + msg[i]["rowid"] + ");'>" +
                                       "<div>" + msg[i]["rowid"] + "</div>" +
                                       "<div>" + msg[i]["DATE"] + "</div>" +
                                       "<div>" + msg[i]["HEAT"] + "</div>" +
                                       "<div>" + msg[i]["TAP"] + "</div>" +
                                       "</div>";

                        }
                        document.getElementById("lst").innerHTML = Struct;

                    },
                    error: function (msg)
                    {
                        $("#formResponse").removeClass('success');
                        $("#formResponse").addClass('error');
                        $("#formResponse").html("There was an error submitting the form. Please try again." + msg[0]);
                    }
                });
                return false;
            }

            function loadProd(Recordnumber)
            {
                hidegrayarea();
                $.ajax({
                    type: "POST",
                    url: "/Report/FormHandler",
                    data: { "rowid": Recordnumber, "table": "getGen", "Seltable": document.getElementById("table").value },
                    dataType: "json",

                    success: function (msg)
                    {

                        $("#formResponse").removeClass('error');
                        $("#formResponse").removeClass('success');
                        $("#formResponse").addClass(msg[0].status);
                        $("#formResponse").html(msg[0].message);

                        var d = new Date;
                        var itm;
                        rslts = msg;

                        var id = 0;

                        for (var x in rslts[id])
                        {
                            itm = document.getElementById(x.toLowerCase());
                            if (rslts[id][x] == null) { rslts[id][x] = ''; };
                            if (rslts[id][x] == 'null') { rslts[id][x] = ''; };
                            if (rslts[id][x] == '') { rslts[id][x] = ''; };
                            if (itm) { itm.innerHTML = rslts[id][x]; itm.value = rslts[id][x]; };
                        };
                    },
                    error: function ()
                    {
                        $("#formResponse").removeClass('success');
                        $("#formResponse").addClass('error');
                        $("#formResponse").html("There was an error submitting the form. Please try again.");
                    }
                });


                return false;

            }
        </script>
	</head>

	<body>
		<div>
			<header>
                <!--#include virtual="./linkpg.shtml"-->
				<h1>Furnace Data Entry</h1>
			</header>
            
            <div class="hidemeall" id="grayarea" onclick='hidegrayarea();'>
            </div>
            <label id="openbtn" class="lnklbl" onclick="openlist();">Search</label> &nbsp;&nbsp;
                        <label id="openbtn" class="lnklbl" onclick="javascript: editObj();">Edit</label>&nbsp;&nbsp;
                        <label id="newbtn" class="lnklbl" onclick="javascript:newObj();"> New </label>
            <div id="ObjList" class="hidemeall">
                <div id="box">
                    
                    <div id="searchbox">
                        <input type="text" id="Opt1" name="Heat" placeholder="Heat">
                        <input type="text" id="Opt2" name="Tap" placeholder="Tap">
                        <!--input type="text" id="Opt3" name="Material" placeholder="Material"-->
                        <button onclick="getList(true);">Search</button>
                    </div>
                    
                    <div id="hdr">
                        <div>Record#</div><div>Date</div><div>Heat</div><div>Tap</div>
                    </div>
                    <div id="lst">
                    </div>
                    
                </div>
            </div>
			<form id="Input" enctype="application/x-www-form-urlencoded" action="/DataEnt/FormHandler" method="post">
			    <input type="hidden" id="table" name="table" value="FurnaceData" />
                <input type="hidden" id="rowid" name="rowid" value="0">
			<h2>Heat Info</h2>
			<div class="dataent">
				<div  class="txtent"><p> Date:  <input type="text"     name="Date" id="date" required /></p> </div>
				<div  class="txtent"><p> Heat #:  <input type="number" name="heat" id="heat" required /></p> </div>
				<div  class="txtent"><p> Tap #: <input type="number"   name="tap"  id="tap" required /></p> </div>
			</div>
			<h2>Other</h2>
			<div class="dataent">
				<div  class="txtent"><p> Furn: <input type="text" name="furn" id="furn"        /></p> </div>
				<div  class="txtent"><p> Time: <input type="text" name="time" id="time"      /></p> </div>
				<div  class="txtent"><p> C_E: <input type="text"  name="c_e"  id="c_e"      /></p> </div>
				<div  class="txtent"><p> C: <input type="text"    name="c"    id="c"        /></p> </div>
				<div  class="txtent"><p> SI: <input type="text"   name="si"   id="si"        /></p> </div>
				<div  class="txtent"><p> Temp: <input type="text" name="temp" id="temp"      /></p> </div>
			</div>
				
			<br>
			<input type="submit" class="submit" value="Submit"/>

			<footer>
				<p>
					&copy;  <a href="/contact.html" class="contactent">john.heidelberg</a>
				</p>
			</footer>
			</form>
		</div>
	</body>
</html>
